#import "../fragments/PriceRange.graphql"

query LiveSearchResults(
    $search: String!,
    $currentPage: Int = 1,
    $limit: Int = 20,
) {
    liveSearchResults(
        search: $search
        currentPage: $currentPage
        pageSize: $limit
    ) {
        categories {
            id
            link
            name
            urlKey: url_key
            categoryWidgetSvgIcon: category_widget_svg_icon
        }

        products(
            search: $search
            pageSize: $limit
            currentPage: $currentPage
        ) {
            totalCount: total_count
            items {
                id

                # Custom Product Fields
                isInCompare @client
                isInCart @client
                isInWishlist @client
                isExistSubscription @client
                isExistReviews @client
                # /Custom Product Fields

                name

                mediaGallery: media_gallery {
                    url
                    label
                    position
                    disabled
                }

                manufacturerName: manufacturer_name

                calculatedPrice @client
                priceBadges @client
                priceRange: price_range {
                    ... PriceRangeFragment
                }

            }
        }


        cmsPages(
            search: $search
            pageSize: $limit
            currentPage: $currentPage
        ) {
            identifier
            urlKey: url_key
            title
        }

        suggestions
    }
}
